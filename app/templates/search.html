{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-lg-10 mx-auto">
    <form class="d-flex mb-4" method="get" action="/">
      <input class="form-control form-control-lg me-2"
             type="search"
             name="q"
             placeholder='Try: data science AND python, or "environmnt"'
             value="{{ q|default:'' }}"
             autofocus>
      <button class="btn btn-primary btn-lg" type="submit">Search</button>
    </form>

    <div class="d-flex justify-content-between align-items-center">
      <h5 class="mb-3">Results</h5>
      {% if source and source != "idle" %}
        <span class="badge rounded-pill text-bg-light badge-source">source: {{ source }}</span>
      {% endif %}
    </div>

    {% if results and results|length > 0 %}
      <div class="list-group">
        {% for r in results %}
          <a class="list-group-item list-group-item-action" href="#doc-{{ r.id }}" id="doc-{{ r.id }}">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">{{ r.title }}</h6>
            </div>
            {% if r.snippet %}
            <p class="mb-1 snippet">{{ r.snippet }}{% if r.snippet|length >= 180 %}â€¦{% endif %}</p>
            {% endif %}
          </a>
        {% endfor %}
      </div>
    {% else %}
      {% if q %}
        <div class="alert alert-warning">No results for <strong>{{ q }}</strong>.</div>
      {% else %}
        <div class="alert alert-secondary">Enter a query to search.</div>
      {% endif %}
    {% endif %}

    <div class="mt-4">
      <h6 class="text-secondary">Recent queries</h6>
      {% if recent_queries %}
        {% for item in recent_queries %}
          <a class="btn btn-sm btn-outline-secondary query-chip" href="/?q={{ item|urlencode }}">{{ item }}</a>
        {% endfor %}
      {% else %}
        <p class="text-secondary">No recent queries yet.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

